인덱스 설계가 어려운 이유
-
- 인덱스가 많으면 다음과 같은 문제가 생긴다
  - DML 성능 저하 -> TPS 저하
  - 데이터 베이스 사이즈 증가 -> 디스크 공간 낭비
  - 데이터 베이스 관리 및 운영 비용 상승
- 개별 쿼리 성능 뿐 아니라 개수를 최소화하여 DML 부하를 줄여야하기 때문에 인덱스 설계는 어렵다.

기장 중요한 두 가지 선택기준
-
- 인덱스 스캔에서 가장 정상적이고 일반적인 방식은 Index Range Scan이다.
- 이를 위해서는 인덱스 선두 컬럼을 반드시 조건절에 사용해야한다.
- 결합인덱스를 사용할 때에 조건절에 항상 사용하거나 자주 사용하는 컬럼을 선택하는 것이 좋다.
- 또 "=" 조건으로 자주 조회하는 컬럼을 앞쪽에 두는 것이 좋다.

스캔 효율성 이외의 판단 기준
-
1. 수행빈도
2. 업무상 중요도
3. 클러스터링 팩터
4. 데이터량
5. DML 부하
6. 저장공간
7. 인덱스 관리 비용

공식을 초월한 전략적 설계
-
- 조건절 패턴이 여러개라고, 패턴마다 인덱스를 만들수는 없다. SQL 튜닝 전문가라면 최적으로 달성해야할 가장 핵심적인 엑세스 경로 한 두개를 전략적으로 선택해서 최적 인덱스를 설계하고, 나머지 액세스 경로는 약간의 비효율이 있더라도 목표성능을 만족하는 수준으로 인덱스를 구성할 수 있어야 한다.

소트 연산을 생략하기 위한 컬럼 추가
-
- I/O를 최소화하면서 소트연산을 생략하려면, 이래 공식에 따라 인덱스를 구성하면 된다.
  - "=" 연산자로 사용한 조건절 컬럼 지정
  - ORDER BY 절에 기술한 컬럼 추가
  - "=" 절이 아닌 조건절 칼렄은 데이터 분포를 고려해 추가 여부를 결정한다.
- IN은 "="가 아니다. 소트연산을 생략하기 위해서는 IN 조건절이 IN-LIST Iterator 방식으로 풀려서는 안된다.

결합 인덱스 선택도
-
- 인덱스 생성여부를 결정할 때, 선택도가 충분히 낮은지는 중요한 판단기준이다.
- 카디널리티가 높은 인덱스는 생성해봐야 효용이 없다.
- 인덱스를 생성할 때 카디널리티는 중요한 판단 기준이다. 하지만 컬럼간의 순서를 정할때에는 필수 조건 여부, 연산자의 형태 등이 더욱 중요한 영향을 준다.

중복 인덱스 제거
-


